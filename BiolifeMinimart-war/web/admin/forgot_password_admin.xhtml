<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Biolife Minimart</title>
        <link href="https://fonts.googleapis.com/css?family=Cairo:400,600,700&amp;amp;display=swap" rel="stylesheet"/>
        <!--<link href="https://fonts.googleapis.com/css?family=Poppins:600&amp;amp;display=swap" rel="stylesheet"/>-->
        <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400i,700i" rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css?family=Ubuntu&amp;amp;display=swap" rel="stylesheet"/>
        <!--<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet"/>-->
        <link rel="shortcut icon" type="image/x-icon" href="../resources/images/favicon.png"/>
        <h:outputStylesheet name="assets/vendor/datatables/css/jquery.dataTables.min.css"/>
        <h:outputStylesheet name="assets/vendor/summernote/summernote.css"/>
        <h:outputStylesheet name="assets/vendor/chartist/css/chartist.min.css"/>
        <h:outputStylesheet name="assets/vendor/bootstrap-select/dist/css/bootstrap-select.min.css"/>
        <h:outputStylesheet name="assets/vendor/owl-carousel/owl.carousel.css"/>
        <h:outputStylesheet name="assets/vendor/lightgallery/css/lightgallery.min.css"/>
        <h:outputStylesheet name="assets/css/style.css"/>

    </h:head>

    <h:body class="h-100">
        <br/> <br/>
        <div class="authincation h-100">
            <div class="container h-100">
                <div class="row justify-content-center h-100 align-items-center">
                    <div class="col-md-6">
                        <div class="authincation-content">
                            <div class="row no-gutters">
                                <div class="col-xl-12">
                                    <div class="auth-form">
                                        <div class="text-center mb-3">
                                            <p><img src="../resources/images/logo-biolife-1.png" alt=""/></p>
                                        </div>
                                        <h4 class="text-center mb-4 text-white">Forgot password</h4>
                                        <h:panelGroup id="pgroup">
                                            <c:if test="#{!employeeMB.valid}">
                                                <h:form id="conf_otp">
                                                    <div class="form-group">
                                                        <label class="mb-1 text-white"><strong>OTP Code</strong></label>
                                                        <h:inputText class="form-control" value="#{employeeMB.optConf}" id="otpconf"/>
                                                        <h:message for="otpconf" id="otpconf_m" class="errorMessage"/>
                                                        <h:outputText value="#{employeeMB.message}" id="mess" class="errorMessage" style="color: red;"/>
                                                    </div>
                                                    <div class="form-group">
                                                        <h:commandButton value="Submit" action="#{employeeMB.checkOTP()}" class="btn btn-secondary">
                                                            <f:ajax execute="@form" render="pgroup otpconf_m mess"/>
                                                        </h:commandButton>
                                                    </div>
                                                </h:form>
                                            </c:if>

                                            <c:if test="#{employeeMB.valid}">
                                                <h:form id="f_password">
                                                    <div class="form-group">
                                                        <label class="mb-1 text-white"><strong>New Password</strong></label>
                                                        <h:inputSecret class="form-control" value="#{employeeMB.passNew}" id="newp"/>
                                                        <h:message for="newp" id="newp_m" class="errorMessage"/>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="mb-1 text-white"><strong>Confirm Password</strong></label>
                                                        <h:inputSecret class="form-control" value="#{employeeMB.passConf}" id="confp"/>
                                                        <h:message for="confp" id="confp_m" class="errorMessage"/>
                                                        <h:outputText value="#{employeeMB.message}" id="mess" class="errorMessage" style="color: red;"/>
                                                    </div>
                                                    <div class="form-group">
                                                        <h:commandButton value="Submit" action="#{employeeMB.forgot_password()}" class="btn btn-secondary">
                                                            <f:ajax execute="@form" render="pgroup newp_m confp_m mess"/>
                                                        </h:commandButton>
                                                    </div>
                                                </h:form>
                                            </c:if>

                                        </h:panelGroup>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--**********************************
            Scripts
        ***********************************-->
        <!-- Required vendors -->
        <script src="../resources/assets/vendor/global/global.min.js"></script>
        <script src="../resources/assets/js/custom.min.js"></script>
        <script src="../resources/assets/js/deznav-init.js"></script>

    </h:body>

</html>